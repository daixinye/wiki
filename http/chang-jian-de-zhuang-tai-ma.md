# HTTP：常见的状态码

HTTP状态码用于描述客户端向服务器端发送请求后的请求结果。通过状态码，客户端可以知道发出的HTTP是是否被正确处理。

状态码由\*\*三位数字\*\*和\*\*原因短语\*\*组成，第一位指定了\*\*响应类别\*\*。

状态码的类别：

- 1XX：Informational 信息性状态码，表示服务器接收的请求正在被处理

- 2XX：Success 成功状态码，表示请求被正常处理完毕

- 3XX：Redirection 重定向状态码，表示客户端需要进行附加操作以完成请求

- 4XX：Client Error 客户端错误状态码，表示因某种原因服务器无法处理请求

- 5XX：Server Error 服务器错误状态码，表示服务器处理请求时出错

\#\# 2XX 成功

\#\#\# 200 OK

表示客户端的请求被服务器端正常处理了。

在这个状态码下，服务器的响应内容则依据请求方法决定。如果请求方法为GET，那么，对应请求资源的实体会一并返回；如果请求方法是HEAD，那么仅返回首部，而对应资源的实体不会被返回。

\#\#\# 204 No Content

表示客户端的请求被服务器端正常处理，但是响应报文中不含有实体的主体部分。实际上204状态码下也不允许响应报文中有实体的主体部分。

该响应码一般用于客户端向服务器端发送信息，而服务器端不必返回新信息的情况下使用。

\#\#\# 206 Parical Content

该状态码表示客户端进行了范围请求（请求资源的一部分内容），而服务器成功执行了这部分的GET请求。响应报文中包含由Content-Range指定的实体内容。

\#\# 3XX 重定向

\#\#\# 301 Moved Permanently

永久性重定向。该状态码表示请求的资源已经分配了新的URI，新的URI在Location首部字段中。

\#\#\# 302 Found

临时性重定向。该状态码表示请求的资源已经分配了新的URI，希望客户端此次能以新的URI进行访问。

注意302是临时性的重定向，请求的资源在将来还有可能换成别的URI。所以与永久性重定向的区别是，301是让客户端之后都用新的URI访问（相当于搬家，其住址URI不会轻易变更），而302时客户端之后仍然应该访问返回302的页面，以获得请求的资源最新的URI（相当于租房，其住址URI随时会变）。

\#\#\# 303 See Other

该状态码表示由于请求对应的资源存在着另一个URI，应使用GET方法定向获取请求的资源。

303与302基本相似，唯一不同处是明确规定需要用GET方法去访问新的URI。例如当使用POST方法访问CGI（公共网关接口，Common Gateway Interface）程序，随后服务器端希望客户端以GET方法重定向到另一个URI上去时，返回303状态码。

\#\#\# 304 Not Modified

该状态表示客户端发送附带条件的请求时（在请求头部中包含If-Match、If-Modified-Since、If-None-Match、If-Range、If-Unmodified-Since），服务器端允许请求访问资源，但因发生请求未满足条件，直接返回304。

即表示服务器端的资源没有发生改变，客户端可以继续使用未过期的缓存资源。

注意：304虽然在3XX 重定向类别中，但跟重定向实际上没有太大的关系。

\#\#\# 307 TEmporary Redirect

临时重定向。该状态码与302基本相同，不同的是307会遵照浏览器标准，不会从POST变成GET。

而301、302响应状态码返回时，浏览器一般都会把POST改成GET（尽管301和302标准是禁止这样做的）并删除请求报文的主体，再发起请求。

\#\# 4XX 客户端错误

\#\#\# 400 Bad Request

该状态码表示请求报文中存在语法错误，需要客户端修改请求内容后再次发送请求。

注意：浏览器会像对待200 OK 一样对待该状态码（即不会像3XX那样子有别的行为）

\#\#\# 401 Unauthorized

该状态码表示发送的请求需要有通过HTTP认证的认证信息。

第一次返回401时，浏览器会弹出认证用的对话框。

第二次返回401时，即表示用户认证失败。

\#\#\# 403 Forbidden

该状态码表示对该资源的请求被服务器拒绝了。服务器没有义务给出拒绝的详细理由，但如果想作说明的话可以在实体的主体部分对原因进行描述。

\#\#\# 404 Not Found

该状态码表示服务器无法找到请求的资源，是最常见的状态码。

\#\# 5XX 服务器端错误

\#\#\# 500 Internal Server Error

该状态码表示服务器端在处理请求时发生了错误，例如无法连接数据库，或者服务端语言中有语法错误等等。

\#\#\# 503 Service Unavailable

该状态码表示服务器端暂时处理超负载或正在进行停机维护，现在无法处理请求。

如果事先知道服务器将在何时恢复，则最好写入Retry-After首部字段再返回给客户端。

\#\# 小结

\#\#\# 注意：

状态码只在服务器端正确按照规范处理请求的前提下才有意义，不少服务器端会出现状态码与状态不一致的问题，需要在实际开发中注意。

\#\#\# 本文提及的常见的状态码

- 200 OK

- 202 No Content

- 204 Partical Content

- 301 Permanently Redirect

- 302 Found

- 303 See Other

- 304 Not Modified

- 307 Temporary Redirect

- 400 Bad Request

- 401 Unauthorized

- 403 Forbbiden

- 404 Not Found

- 500 Interval Server Error

- 503 Service Unavailable

\#\#\# 总结：

本文整理了14种常见的状态码，其中包含4个状态类别，2XX，3XX，4XX，5XX，分别代表了成功，重定向，客户端错误和服务器端错误。

2XX中，要注意202与200的区别，前者不含资源实体的主体。

3XX中，要注意304与重定向无关，301和302一个是永久重定向，一个是临时重定向，且在标准中是不能把POST请求改成GET请求的（但是实际浏览器都会这么做）。303是302的相反版本，303要求POST改成GET请求。307是302的严格版，不允许把POST改成GET请求。

4XX中，400和401都是与浏览器有关的，前者是请求有错误后者是没有HTTP认证信息；403和404与服务器端有关，403禁止浏览器访问特定资源，404则是服务器上没有特定的资源。

5XX中，500是服务器端处理请求时出错，一般是数据库连接、代码有语法问题等等。503则是服务器负载过大或在维护，暂时无法提供服务。



